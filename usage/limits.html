<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Usage Limits | Laravel Vouchers</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Manage ecommerce vouchers.">
    <meta property="og:site_name" content="Laravel Vouchers">
    <meta property="og:title" content="Usage Limits">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/usage/limits.html">
    <meta name="twitter:title" content="Usage Limits">
    <meta name="twitter:url" content="/usage/limits.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/laravel-vouchers/assets/css/0.styles.444572b0.css" as="style"><link rel="preload" href="/laravel-vouchers/assets/js/app.af909db3.js" as="script"><link rel="preload" href="/laravel-vouchers/assets/js/2.0a4b0f83.js" as="script"><link rel="preload" href="/laravel-vouchers/assets/js/18.ac0b2881.js" as="script"><link rel="prefetch" href="/laravel-vouchers/assets/js/10.ef111839.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/11.e8f6b6b8.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/12.c8c9e1cf.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/13.70c26686.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/14.7b013b60.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/15.f5f918b0.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/16.d7eb0cc3.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/17.67270562.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/19.71b89c99.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/20.ccdd2293.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/21.b3241ea4.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/3.535b8b94.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/4.a94a5e50.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/5.b8254b2c.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/6.10d24408.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/7.2143f453.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/8.dd40b9ef.js"><link rel="prefetch" href="/laravel-vouchers/assets/js/9.27c057d1.js">
    <link rel="stylesheet" href="/laravel-vouchers/assets/css/0.styles.444572b0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/laravel-vouchers/" class="home-link router-link-active"><!----> <span class="site-name">Laravel Vouchers</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/laravel-vouchers/" class="nav-link">
  Home
</a></div> <a href="https://github.com/augustusnaz/laravel-vouchers" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/laravel-vouchers/" class="nav-link">
  Home
</a></div> <a href="https://github.com/augustusnaz/laravel-vouchers" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Get started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-vouchers/features.html" class="sidebar-link">Features</a></li><li><a href="/laravel-vouchers/installation/" class="sidebar-link">Installation</a></li><li><a href="/laravel-vouchers/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/laravel-vouchers/installation/nova-example.html" class="sidebar-link">Nova Resource Example</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Usage</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-vouchers/usage/create.html" class="sidebar-link">Creating Vouchers</a></li><li><a href="/laravel-vouchers/usage/limits.html" aria-current="page" class="active sidebar-link">Usage Limits</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-vouchers/usage/limits.html#limit-quantity" class="sidebar-link">Limit quantity</a></li><li class="sidebar-sub-header"><a href="/laravel-vouchers/usage/limits.html#limit-redeemers" class="sidebar-link">Limit redeemers</a></li><li class="sidebar-sub-header"><a href="/laravel-vouchers/usage/limits.html#expiry" class="sidebar-link">Expiry</a></li><li class="sidebar-sub-header"><a href="/laravel-vouchers/usage/limits.html#active-dates" class="sidebar-link">Active dates</a></li><li class="sidebar-sub-header"><a href="/laravel-vouchers/usage/limits.html#limit-by-specific-items" class="sidebar-link">Limit by specific items</a></li></ul></li><li><a href="/laravel-vouchers/usage/redeem.html" class="sidebar-link">Redeem Vouchers</a></li><li><a href="/laravel-vouchers/usage/data.html" class="sidebar-link">Additional Data</a></li><li><a href="/laravel-vouchers/usage/relationships.html" class="sidebar-link">Relationships</a></li></ul></section></li><li><a href="/laravel-vouchers/errors.html" class="sidebar-link">Handling Errors</a></li><li><a href="/laravel-vouchers/events.html" class="sidebar-link">Events</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="usage-limits"><a href="#usage-limits" class="header-anchor">#</a> Usage Limits</h1> <p>Voucher quantity (number of times it may be redeemed), associated items, expiry dates, allowd/denied uses, are optional parameters that may be used to further limit who or what can redeem a voucher.</p> <h2 id="limit-quantity"><a href="#limit-quantity" class="header-anchor">#</a> Limit quantity</h2> <h3 id="reusable-vouchers"><a href="#reusable-vouchers" class="header-anchor">#</a> Reusable vouchers</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">MOIREI<span class="token punctuation">\</span>Vouchers<span class="token punctuation">\</span>VoucherScheme</span><span class="token punctuation">;</span>

<span class="token variable">$product</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$attributes</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'limit_scheme'</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">VoucherScheme</span><span class="token operator">::</span><span class="token constant">ITEM</span><span class="token punctuation">,</span> <span class="token comment">// options INSTANCE (default), ITEM, REDEEMER</span>
    <span class="token string single-quoted-string">'quantity'</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 2 uses</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$vouchers</span> <span class="token operator">=</span> <span class="token variable">$product</span><span class="token operator">-&gt;</span><span class="token function">createVouchers</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token variable">$attributes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$vouchers</span> <span class="token operator">=</span> <span class="token variable">$product</span><span class="token operator">-&gt;</span><span class="token function">createVouchers</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    		<span class="token operator">-&gt;</span><span class="token function">reuse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// reuse once</span>
    		<span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$vouchers</span> <span class="token operator">=</span> <span class="token variable">$product</span><span class="token operator">-&gt;</span><span class="token function">createVouchers</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    		<span class="token operator">-&gt;</span><span class="token function">reuse</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// reuse twice</span>
    		<span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Using the Facade;</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$vouchers</span> <span class="token operator">=</span> <span class="token class-name static-context">Vouchers</span><span class="token operator">::</span><span class="token function">createReuse</span><span class="token punctuation">(</span><span class="token variable">$product</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">$attributes</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// reuse once</span>
<span class="token variable">$vouchers</span> <span class="token operator">=</span> <span class="token class-name static-context">Vouchers</span><span class="token operator">::</span><span class="token function">createReuse</span><span class="token punctuation">(</span><span class="token variable">$product</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">$attributes</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// reuse twice</span>
<span class="token variable">$vouchers</span> <span class="token operator">=</span> <span class="token class-name static-context">Vouchers</span><span class="token operator">::</span><span class="token function">createReuse</span><span class="token punctuation">(</span><span class="token variable">$product</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'quantity'</span> <span class="token operator">=&gt;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// reuse twice</span>
</code></pre></div><p>Limit scheme is used to specify whether the total quantity is reduced per instance, associated items or per redeemer.</p> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td><code>INSTANCE</code> (default)</td> <td>Redeems are accumulated on every invocation on the instance.</td></tr> <tr><td><code>ITEM</code></td> <td>When one or more items are associated with the Voucher, number of redeems is counted per provided product instance. This means the Voucher may be exhausted for one product and not the other</td></tr> <tr><td><code>REDEEMER</code></td> <td>Number of redeems is counted per redeemer. This means the voucher may be exhausted for one redeemer and not the other</td></tr></tbody></table> <h2 id="limit-redeemers"><a href="#limit-redeemers" class="header-anchor">#</a> Limit redeemers</h2> <p>Making vouchers redeemable by any model type means it can be used with multi-auth users/guests/resellers type setup. If in any case you need to generate vouchers only redeemable by a certain user group/locale/etc., you can use the allow_models/deny_models attributes. Ultimately specifies who may or may not have the ability to redeem a voucher instance.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$product</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user1</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user2</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$guest1</span> <span class="token operator">=</span> <span class="token class-name static-context">Guest</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create 5 vouchers associated to the product model.</span>
<span class="token variable">$vouchers</span> <span class="token operator">=</span> <span class="token class-name static-context">Vouchers</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token variable">$product</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create with model attributes</span>
<span class="token variable">$attributes</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'allow_models'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span> <span class="token variable">$user1</span><span class="token punctuation">,</span> <span class="token variable">$guest1</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'deny_models'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span> <span class="token variable">$user2</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'quantity'</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'limit_scheme'</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">VoucherScheme</span><span class="token operator">::</span><span class="token constant">REDEEMER</span><span class="token punctuation">,</span> <span class="token comment">// each redeemer may only redeem the voucher(s) twice</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$vouchers</span> <span class="token operator">=</span> <span class="token class-name static-context">Vouchers</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token variable">$product</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token variable">$attributes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>allow_models</code> and <code>deny_models</code> values can also be passed as attributes to the <code>Vouchers</code> facade and the <code>Voucher</code> class.</p> <p>These attributes can be passed even after the voucher is created. You can also use the <code>allow</code> and <code>deny</code> methods;</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$vouchers</span><span class="token operator">-&gt;</span><span class="token function">allow</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token variable">$user1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    	 <span class="token operator">-&gt;</span><span class="token function">allow</span><span class="token punctuation">(</span><span class="token variable">$user2</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span>
    	 <span class="token operator">-&gt;</span><span class="token function">deny</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token variable">$guest1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Notes</strong></p> <ul><li>The <code>allow_models</code> and <code>deny_models</code> attributes mentioned above are actually saved as <code>can_redeem</code> and <code>cannot_redeem</code> internally. They are intercepted on boot creating and updating.</li></ul> <h2 id="expiry"><a href="#expiry" class="header-anchor">#</a> Expiry</h2> <p>You can also create vouchers that will only be available until a certain date. Expired vouchers cannot be redeemed.
The <code>expires_at</code> attribute accepts a Carbon instance.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$product</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Set in attributes</span>
<span class="token variable">$voucher</span> <span class="token operator">=</span> <span class="token class-name static-context">Voucher</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'expires_at'</span> <span class="token operator">=&gt;</span> <span class="token function">today</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addDays</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setItems</span><span class="token punctuation">(</span><span class="token variable">$product</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// or</span>
<span class="token variable">$product</span><span class="token operator">-&gt;</span><span class="token function">createVouchers</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'expires_at'</span> <span class="token operator">=&gt;</span> <span class="token function">today</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addDays</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Or use the <code>days</code> method</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$voucher</span> <span class="token operator">=</span> <span class="token class-name static-context">Voucher</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">days</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Vouchers may be expired instantly with</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$voucher</span><span class="token operator">-&gt;</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or give it a date</span>
<span class="token variable">$voucher</span><span class="token operator">-&gt;</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addHours</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To prune expired vouchers, call the <code>pruneExpired</code> method.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// prune expired items until now</span>
<span class="token variable">$voucher</span><span class="token operator">-&gt;</span><span class="token function">pruneExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// prune expired vouchers before yesterday</span>
<span class="token variable">$voucher</span><span class="token operator">-&gt;</span><span class="token function">pruneExpired</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">yesterday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="active-dates"><a href="#active-dates" class="header-anchor">#</a> Active dates</h2> <p>Active dates make it possible to create vouchers ahead of time. An example usage is generate vouchers for seasonal sales.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$product</span><span class="token operator">-&gt;</span><span class="token function">createVouchers</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'active_date'</span> <span class="token operator">=&gt;</span> <span class="token function">today</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addDays</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// christmas sale</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Can used with <code>expires_at</code> to create vouchers with limited use window.</p> <h2 id="limit-by-specific-items"><a href="#limit-by-specific-items" class="header-anchor">#</a> Limit by specific items</h2> <p>The provided products below are the only items the voucher maybe redeemed against.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token punctuation">[</span><span class="token variable">$product1</span><span class="token punctuation">,</span> <span class="token variable">$product2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a single Voucher model instance</span>
<span class="token variable">$voucher</span> <span class="token operator">=</span> <span class="token class-name static-context">Voucher</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setItems</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token variable">$product1</span><span class="token punctuation">,</span> <span class="token variable">$product2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">redeem</span><span class="token punctuation">(</span><span class="token variable">$voucher</span><span class="token punctuation">,</span> <span class="token variable">$product1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/laravel-vouchers/usage/create.html" class="prev">
        Creating Vouchers
      </a></span> <span class="next"><a href="/laravel-vouchers/usage/redeem.html">
        Redeem Vouchers
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/laravel-vouchers/assets/js/app.af909db3.js" defer></script><script src="/laravel-vouchers/assets/js/2.0a4b0f83.js" defer></script><script src="/laravel-vouchers/assets/js/18.ac0b2881.js" defer></script>
  </body>
</html>
